import{P as a,s as z,S as I,a as u,u as E,b as G,c as X,d as R,r as Y,e as H,f as J,g as K,h as O,j as o,B as d,T as S,i as V,k as Z,l as D,m as U,_ as F,n as ee,o as oe,L as re,p as se}from"./index-BTJP2eW-.js";a.bool,a.string,a.bool;const te=z(I)(({theme:t})=>({[`&.${u.alternativeLabel}`]:{top:20,left:"calc(-50% + 7px)",right:"calc(50% + 7px)"},[`&.${u.active}`]:{[`& .${u.line}`]:{backgroundColor:"#FFDA55"}},[`&.${u.completed}`]:{[`& .${u.line}`]:{backgroundColor:"#FFDA55"}},[`& .${u.line}`]:{height:5,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})),ne=z("div")(({theme:t})=>({backgroundColor:"#ccc",zIndex:1,color:"#fff",width:"40px",height:"40px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"2px solid #ccc",variants:[{props:({ownerState:p})=>p.active,style:{backgroundColor:"#FFDA55",boxShadow:"2px 2px #02216F",color:"#02216F",border:"2px solid #02216F"}},{props:({ownerState:p})=>p.completed,style:{backgroundColor:"#FFDA55",color:"#02216F",border:"2px solid #02216F"}}]}));function $(t){const{active:p,completed:b,className:e}=t;return o.jsx(ne,{ownerState:{completed:b,active:p},className:e,children:o.jsx(S,{sx:{fontWeight:"bold",fontFamily:"'Suranna'  !important",fontSize:"20px"},children:t.icon})})}$.propTypes={active:a.bool,className:a.string,completed:a.bool,icon:a.node};function ce(){var L,w;const{data:t,isLoading:p}=E(),b=G(),e=X(r=>r.UserState),P=R(b.breakpoints.down("sm")),W=R(b.breakpoints.down("md")),j=Y.useRef(null),[B]=H(),f=B.get("section"),[Q]=J(),_=K(),q=O(),M=r=>{j.current&&(r.preventDefault(),j.current.scrollLeft+=r.deltaY)},N=(r,s,m,C,v=3)=>{try{_(se()),F.promise(Q({sectionIndex:r,lessonIndex:s,topicIndex:m,topicId:C,questionCount:3}).unwrap(),{loading:"Creating Session...",success:n=>(sessionStorage.setItem("QuizSessionID",n.sessionId),q(`/quiz/${n.sessionId}`,{replace:!0}),"Session Created Successfully!"),error:n=>(console.error(n),"Failed to create session. Please try again.")})}catch(n){console.error("Failed to update quiz session:",n),F.error("sorry session not save")}};return o.jsx(o.Fragment,{children:t&&((w=(L=t==null?void 0:t.units[f])==null?void 0:L.lessons)==null?void 0:w.map((r,s)=>{var m,C,v,n,k,T,A;return o.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:"20px",borderRadius:"10px",backgroundColor:"#fff",mb:"16px",mr:P?null:"30px",border:"2px solid",borderColor:"#02216F",gap:"20px",position:"relative",overflow:"hidden",filter:s<=((m=e==null?void 0:e.CourseProgress)==null?void 0:m.currentLesson)?"none":"grayscale(100%)"},children:[o.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"20px",width:"100%",mb:P?"40px":"20px"},children:[o.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[o.jsx(S,{variant:W?"h6":"h5",sx:{fontWeight:"bold",color:"#02216F"},children:r.name}),o.jsx(V,{variant:"contained",sx:{height:"40px",width:"150px",fontWeight:"bold",backgroundColor:"#1A49BA",color:"#fff",borderRadius:"50px",textTransform:"none",border:"1px solid",borderColor:"#FFDA55","&:hover":{color:"#1A49BA",backgroundColor:"#FFDA55"}},children:"Start"})]}),o.jsx(d,{ref:j,onWheel:M,sx:{width:"100%",overflowX:"auto",display:"flex",padding:"10px 0",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:o.jsx(Z,{sx:{width:"100%"},spacing:4,children:o.jsx(D,{alternativeLabel:!0,activeStep:s<((C=e==null?void 0:e.CourseProgress)==null?void 0:C.currentLesson)?t.units[(v=e==null?void 0:e.CourseProgress)==null?void 0:v.currentUnit].lessons[(n=e==null?void 0:e.CourseProgress)==null?void 0:n.currentLesson].topics.length-1:s==((k=e==null?void 0:e.CourseProgress)==null?void 0:k.currentLesson)?(T=e==null?void 0:e.CourseProgress)==null?void 0:T.currentTopic:null,connector:o.jsx(te,{}),children:(A=r==null?void 0:r.topics)==null?void 0:A.map((i,y)=>o.jsx(U,{onClick:()=>{var c,l;y<=((c=e==null?void 0:e.CourseProgress)==null?void 0:c.currentTopic)&&s==((l=e==null?void 0:e.CourseProgress)==null?void 0:l.currentLesson)?N(f,s,y,i._id):F.error(o.jsxs(d,{style:{display:"flex",alignItems:"center"},children:[o.jsx(ee,{style:{marginRight:"8px",color:"inherit"}}),"Topic Locked"]}),{icon:!1})},children:o.jsx(oe,{StepIconComponent:$,children:o.jsx(S,{variant:"body1",sx:{fontWeight:"bold",textAlign:"center",color:"#333",fontSize:"14px",mx:"10px",px:"10px"},children:i.name})})},i._id))})})})]}),o.jsxs(d,{sx:{display:"flex",position:"absolute",flexDirection:"column",bottom:0,left:0,right:0},children:[o.jsx(S,{variant:"body",sx:{fontWeight:"bold",color:"white",px:"20px",py:"6px",bgcolor:"#1A49BA",borderRadius:"20px 0 0 0",alignSelf:"flex-end"},children:(()=>{var c,l,x,g,h;const i=(r==null?void 0:r.topics.length)||0;return`${s<((c=e==null?void 0:e.CourseProgress)==null?void 0:c.currentLesson)?((x=(l=t.units[f])==null?void 0:l.lessons[s])==null?void 0:x.topics.length)||0:s===((g=e==null?void 0:e.CourseProgress)==null?void 0:g.currentLesson)&&((h=e==null?void 0:e.CourseProgress)==null?void 0:h.currentTopic)||0}/${i}`})()}),o.jsx(re,{variant:"determinate",value:(()=>{var c,l,x,g,h;const i=((l=(c=t.units[f])==null?void 0:c.lessons[s])==null?void 0:l.topics.length)||1;return(s<((x=e==null?void 0:e.CourseProgress)==null?void 0:x.currentLesson)?i:s===((g=e==null?void 0:e.CourseProgress)==null?void 0:g.currentLesson)&&((h=e==null?void 0:e.CourseProgress)==null?void 0:h.currentTopic)||0)/i*100})(),sx:{height:"10px",bgcolor:"#FFDA55","& .MuiLinearProgress-bar":{backgroundColor:"#1A49BA",borderRadius:"20px"}}})]})]})}))})}export{ce as default};
